"use strict";(self.webpackChunkcamaleon=self.webpackChunkcamaleon||[]).push([[12],{428:function(t,e,n){n.r(e);var a=n(822),i=n.n(a),r=n(745),o=n(379),c=n.n(o),l=n(795),s=n.n(l),d=n(569),f=n.n(d),u=n(565),h=n.n(u),m=n(216),g=n.n(m),p=n(589),y=n.n(p),w=n(424),v={};v.styleTagTransform=y(),v.setAttributes=h(),v.insert=f().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=g(),c()(w.Z,v),w.Z&&w.Z.locals&&w.Z.locals;var A=n(48),b=n(144),B=n(326),x=n(340),E=n(963),F=n(120),C=n(942),k=n(343),R=n(87),M={};M.styleTagTransform=y(),M.setAttributes=h(),M.insert=f().bind(null,"head"),M.domAPI=s(),M.insertStyleElement=g(),c()(R.Z,M),R.Z&&R.Z.locals&&R.Z.locals;var Z=function(){var t,e,n,a,i,r,o,c,l,s,d,f,u={},h=[],m=[],g=5003,p=0,y=!1,w=0,v=0,A=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],b=[],B=u.LZWEncoder=function(i,r,o,c){t=i,e=r,n=o,a=Math.max(2,c)},x=function(t,e){b[f++]=t,f>=254&&k(e)},E=function(t){F(g),p=s+2,y=!0,Z(s,t)},F=function(t){for(var e=0;e<t;++e)h[e]=-1},C=u.compress=function(t,e){var n,a,i,r,u,w;for(y=!1,c=R(o=l=t),d=1+(s=1<<t-1),p=s+2,f=0,r=M(),w=0,n=g;n<65536;n*=2)++w;w=8-w,F(g),Z(s,e);t:for(;-1!=(i=M());)if(n=(i<<12)+r,h[a=i<<w^r]!=n){if(h[a]>=0){u=5003-a,0===a&&(u=1);do{if((a-=u)<0&&(a+=5003),h[a]==n){r=m[a];continue t}}while(h[a]>=0)}Z(r,e),r=i,p<4096?(m[a]=p++,h[a]=n):E(e)}else r=m[a];Z(r,e),Z(d,e)},k=(u.encode=function(n){n.writeByte(a),i=t*e,r=0,C(a+1,n),n.writeByte(0)},function(t){f>0&&(t.writeByte(f),t.writeBytes(b,0,f),f=0)}),R=function(t){return(1<<t)-1},M=function(){return 0===i?-1:(--i,255&n[r++])},Z=function(t,e){for(w&=A[v],v>0?w|=t<<v:w=t,v+=o;v>=8;)x(255&w,e),w>>=8,v-=8;if((p>c||y)&&(y?(c=R(o=l),y=!1):(++o,c=12==o?4096:R(o))),t==d){for(;v>0;)x(255&w,e),w>>=8,v-=8;k(e)}};return B.apply(this,arguments),u},I=function(){var t,e,n,a,i,r={},o=256,c=1024,l=1<<18,s=[],d=[],f=[],u=[],h=r.NeuQuant=function(t,r,c){var l,s;for(e=t,n=r,a=c,i=new Array(o),l=0;l<o;l++)i[l]=new Array(4),(s=i[l])[0]=s[1]=s[2]=(l<<12)/o,f[l]=256,d[l]=0},m=(r.map=function(t,e,n){var a,r,c,l,d,f,u;for(d=1e3,u=-1,r=(a=s[e])-1;a<o||r>=0;)a<o&&((c=(f=i[a])[1]-e)>=d?a=o:(a++,c<0&&(c=-c),(l=f[0]-t)<0&&(l=-l),(c+=l)<d&&((l=f[2]-n)<0&&(l=-l),(c+=l)<d&&(d=c,u=f[3])))),r>=0&&((c=e-(f=i[r])[1])>=d?r=-1:(r--,c<0&&(c=-c),(l=f[0]-t)<0&&(l=-l),(c+=l)<d&&((l=f[2]-n)<0&&(l=-l),(c+=l)<d&&(d=c,u=f[3]))));return u},r.process=function(){return function(){var i,r,o,l,s,d,f,h,m,w,v,A,b,B;for(n<1509&&(a=1),t=30+(a-1)/3,A=e,b=0,B=n,w=(v=n/(3*a))/100|0,h=c,(f=(d=2048)>>6)<=1&&(f=0),i=0;i<f;i++)u[i]=h*(256*(f*f-i*i)/(f*f));for(m=n<1509?3:n%499!=0?1497:n%491!=0?1473:n%487!=0?1461:1509,i=0;i<v;)if(o=(255&A[b+0])<<4,l=(255&A[b+1])<<4,s=(255&A[b+2])<<4,r=y(o,l,s),p(h,r,o,l,s),0!==f&&g(f,r,o,l,s),(b+=m)>=B&&(b-=n),0===w&&(w=1),++i%w==0)for(h-=h/t,(f=(d-=d/30)>>6)<=1&&(f=0),r=0;r<f;r++)u[r]=h*(256*(f*f-r*r)/(f*f))}(),m(),function(){var t,e,n,a,r,c,l,d;for(l=0,d=0,t=0;t<o;t++){for(n=t,a=(r=i[t])[1],e=t+1;e<o;e++)(c=i[e])[1]<a&&(n=e,a=c[1]);if(c=i[n],t!=n&&(e=c[0],c[0]=r[0],r[0]=e,e=c[1],c[1]=r[1],r[1]=e,e=c[2],c[2]=r[2],r[2]=e,e=c[3],c[3]=r[3],r[3]=e),a!=l){for(s[l]=d+t>>1,e=l+1;e<a;e++)s[e]=t;l=a,d=t}}for(s[l]=d+255>>1,e=l+1;e<256;e++)s[e]=255}(),function(){for(var t=[],e=new Array(o),n=0;n<o;n++)e[i[n][3]]=n;for(var a=0,r=0;r<o;r++){var c=e[r];t[a++]=i[c][0],t[a++]=i[c][1],t[a++]=i[c][2]}return t}()},function(){var t;for(t=0;t<o;t++)i[t][0]>>=4,i[t][1]>>=4,i[t][2]>>=4,i[t][3]=t}),g=function(t,e,n,a,r){var c,s,d,f,h,m,g;for((d=e-t)<-1&&(d=-1),(f=e+t)>o&&(f=o),c=e+1,s=e-1,m=1;c<f||s>d;){if(h=u[m++],c<f){g=i[c++];try{g[0]-=h*(g[0]-n)/l,g[1]-=h*(g[1]-a)/l,g[2]-=h*(g[2]-r)/l}catch(t){}}if(s>d){g=i[s--];try{g[0]-=h*(g[0]-n)/l,g[1]-=h*(g[1]-a)/l,g[2]-=h*(g[2]-r)/l}catch(t){}}}},p=function(t,e,n,a,r){var o=i[e];o[0]-=t*(o[0]-n)/c,o[1]-=t*(o[1]-a)/c,o[2]-=t*(o[2]-r)/c},y=function(t,e,n){var a,r,c,l,s,u,h,m,g,p;for(g=m=~(1<<31),h=u=-1,a=0;a<o;a++)(r=(p=i[a])[0]-t)<0&&(r=-r),(c=p[1]-e)<0&&(c=-c),r+=c,(c=p[2]-n)<0&&(c=-c),(r+=c)<m&&(m=r,u=a),(l=r-(d[a]>>12))<g&&(g=l,h=a),s=f[a]>>10,f[a]-=s,d[a]+=s<<10;return f[u]+=64,d[u]-=65536,h};return h.apply(this,arguments),r},S=function(){for(var t=0,e={};t<256;t++)e[t]=String.fromCharCode(t);function n(){this.bin=[]}n.prototype.getData=function(){for(var t="",n=this.bin.length,a=0;a<n;a++)t+=e[this.bin[a]];return t},n.prototype.writeByte=function(t){this.bin.push(t)},n.prototype.writeUTFBytes=function(t){for(var e=t.length,n=0;n<e;n++)this.writeByte(t.charCodeAt(n))},n.prototype.writeBytes=function(t,e,n){for(var a=n||t.length,i=e||0;i<a;i++)this.writeByte(t[i])};var a,i,r,o,c,l,s,d,f,u={},h=null,m=-1,g=0,p=!1,y=[],w=7,v=-1,A=!1,b=!0,B=!1,x=10,E="Generated by jsgif (https://github.com/antimatter15/jsgif/)",F=(u.setDelay=function(t){g=Math.round(t/10)},u.setDispose=function(t){t>=0&&(v=t)},u.setRepeat=function(t){t>=0&&(m=t)},u.setTransparent=function(t){h=t},u.setComment=function(t){E=t},u.addFrame=function(t,e){if(null===t||!p||null===o)throw new Error("Please call start method before calling addFrame");var n=!0;try{e?t instanceof ImageData?(c=t.data,B&&a==t.width&&i==t.height||C(t.width,t.height)):t instanceof Uint8ClampedArray?t.length==a*i*4?c=t:(console.log("Please set the correct size: ImageData length mismatch"),n=!1):(console.log("Please provide correct input"),n=!1):(c=t.getImageData(0,0,t.canvas.width,t.canvas.height).data,B||C(t.canvas.width,t.canvas.height)),M(),k(),b&&(T(),D(),m>=0&&j()),S(),""!==E&&U(),N(),b||D(),z(),b=!1}catch(t){n=!1}return n},u.download=function(t){if(null===o||0==A)console.log("Please call start method and add frames and call finish method before calling download");else{t=void 0!==t?t.endsWith(".gif")?t:t+".gif":"download.gif";var e=document.createElement("a");e.download=t,e.href=URL.createObjectURL(new Blob([new Uint8Array(o.bin)],{type:"image/gif"})),e.click()}},u.finish=function(){if(!p)return!1;var t=!0;p=!1;try{o.writeByte(59),A=!0}catch(e){t=!1}return t},function(){r=0,c=null,l=null,s=null,f=null,A=!1,b=!0}),C=(u.setFrameRate=function(t){15!=t&&(g=Math.round(100/t))},u.setQuality=function(t){t<1&&(t=1),x=t},u.setSize=function(t,e){p&&!b||((a=t)<1&&(a=320),(i=e)<1&&(i=240),B=!0)}),k=(u.start=function(){F();var t=!0;A=!1,o=new n;try{o.writeUTFBytes("GIF89a")}catch(e){t=!1}return p=t},u.cont=function(){return F(),A=!1,o=new n,p=!0},function(){var t=l.length,e=t/3;s=[];var n=new I(l,t,x);f=n.process();for(var a=0,i=0;i<e;i++){var o=n.map(255&l[a++],255&l[a++],255&l[a++]);y[o]=!0,s[i]=o}l=null,d=8,w=7,null!==h&&(r=R(h))}),R=function(t){if(null===f)return-1;for(var e=(16711680&t)>>16,n=(65280&t)>>8,a=255&t,i=0,r=16777216,o=f.length,c=0;c<o;){var l=e-(255&f[c++]),s=n-(255&f[c++]),d=a-(255&f[c]),u=l*l+s*s+d*d,h=c/3;y[h]&&u<r&&(r=u,i=h),c++}return i},M=function(){var t=a,e=i;l=[];for(var n=c,r=0,o=0;o<e;o++)for(var s=0;s<t;s++){var d=o*t*4+4*s;l[r++]=n[d],l[r++]=n[d+1],l[r++]=n[d+2]}},S=function(){var t,e;o.writeByte(33),o.writeByte(249),o.writeByte(4),null===h?(t=0,e=0):(t=1,e=2),v>=0&&(e=7&v),e<<=2,o.writeByte(0|e|t),P(g),o.writeByte(r),o.writeByte(0)},U=function(){o.writeByte(33),o.writeByte(254),o.writeByte(E.length),o.writeUTFBytes(E),o.writeByte(0)},N=function(){o.writeByte(44),P(0),P(0),P(a),P(i),b?o.writeByte(0):o.writeByte(128|w)},T=function(){P(a),P(i),o.writeByte(240|w),o.writeByte(0),o.writeByte(0)},j=function(){o.writeByte(33),o.writeByte(255),o.writeByte(11),o.writeUTFBytes("NETSCAPE2.0"),o.writeByte(3),o.writeByte(1),P(m),o.writeByte(0)},D=function(){o.writeBytes(f);for(var t=768-f.length,e=0;e<t;e++)o.writeByte(0)},P=function(t){o.writeByte(255&t),o.writeByte(t>>8&255)},z=function(){new Z(a,i,s,d).encode(o)};return u.stream=function(){return o},u.setProperties=function(t,e){p=t,b=e},u},U=(n(63),n(671));var N=function(t){(0,x.Z)(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,F.Z)(e);if(n){var i=(0,F.Z)(this).constructor;t=Reflect.construct(a,arguments,i)}else t=a.apply(this,arguments);return(0,E.Z)(this,t)});function o(t){var e;return(0,A.Z)(this,o),e=r.call(this,t),(0,C.Z)((0,B.Z)(e),"hideModal",(function(){var t=new Image;t.src=e.cropperRef.current.cropper.getCroppedCanvas().toDataURL(),t.onload=function(){e.setState({crop:t,showModal:!1},e.create)}})),e.state={loaded:!1,gif:null,face:null,crop:null,showModal:!1},e.scaleFactor=.25,e.side=1500,e.img=null,e.cropperRef=(0,a.createRef)(),e}return(0,b.Z)(o,[{key:"componentDidMount",value:function(){var t=this;this.img=new Image,this.img.src="./camaleon.png",this.img.onload=function(){t.setState({loaded:!0}),t.create()}}},{key:"create",value:function(){var t=new S;t.setRepeat(0),t.setDelay(100),t.start();var e=document.createElement("canvas");e.width=this.side*this.scaleFactor,e.height=this.side*this.scaleFactor;for(var n=e.getContext("2d",{willReadFrequently:!0}),a=0;a<3;a++)for(var i=0;i<360;i+=30)this.clear(n,this.scaleFactor),this.draw(i+10*a,n,this.scaleFactor),t.addFrame(n);t.finish();var r=t.stream().getData();this.setState({gif:"data:image/gif;base64,".concat(window.btoa(r))})}},{key:"draw",value:function(t,e){this.state.crop&&e.drawImage(this.state.crop,0,0,this.state.crop.width,this.state.crop.height,112*this.scaleFactor,473*this.scaleFactor,598*this.scaleFactor,598*this.scaleFactor),this.drawBody(t,e),e.drawImage(this.img,0,0,this.side,this.side,0,0,this.side*this.scaleFactor,this.side*this.scaleFactor),this.drawUrl(e,this.scaleFactor)}},{key:"drawBody",value:function(t,e){var n=document.createElement("canvas");n.width=this.side*this.scaleFactor,n.height=this.side*this.scaleFactor;var a=n.getContext("2d");a.fillStyle="hsl(".concat(t,", 100%, 50%)"),a.fillRect(0,0,this.side,this.side),a.globalCompositeOperation="destination-in",a.drawImage(this.img,this.side,0,this.side,this.side,0,0,this.side*this.scaleFactor,this.side*this.scaleFactor),a.globalCompositeOperation="source-over",e.drawImage(n,0,0)}},{key:"drawUrl",value:function(t){t.font="".concat(80*this.scaleFactor,"px ComicTypo"),t.textAlign="center",t.fillStyle="rgba(0, 0, 0, .5)",t.fillText("progredemente.com/camaleon",this.side*this.scaleFactor/2,70*this.scaleFactor)}},{key:"clear",value:function(t){t.fillStyle="white",t.fillRect(0,0,this.side*this.scaleFactor,this.side*this.scaleFactor)}},{key:"download",value:function(){var t=document.createElement("a");t.download="camaleon.gif",t.href=this.state.gif,t.click()}},{key:"upload",value:function(){var t=this,e=document.createElement("input");e.type="file",e.accept="image/png, image/jpeg",e.onchange=function(){var n=new FileReader;n.addEventListener("load",(function(e){var n=new Image;n.src=e.target.result,n.onload=function(){t.setState({face:n,showModal:!0})}})),n.readAsDataURL(e.files[0])},e.click()}},{key:"render",value:function(){var t=this;return i().createElement(i().Fragment,null,!this.state.loaded&&i().createElement("div",{className:"loading"},i().createElement("img",{src:"".concat("/resources","/camaleon.png"),alt:"Cargando"}),"Cargando"),this.state.loaded&&this.state.gif&&i().createElement("div",{className:"app"},i().createElement("div",{className:"title"},i().createElement("img",{src:"./camaleon.png",alt:"Camaleón"}),i().createElement("div",null,"por ",i().createElement("a",{href:"/",target:"_blank"},"progredemente"))),i().createElement("img",{src:this.state.gif,alt:"gif",className:"gif"}),i().createElement("div",{className:"buttons"},i().createElement("div",{className:"button",onClick:function(){t.upload()}},"Elegir cara ",i().createElement(U.Icon,{icon:"F"})),this.state.face&&i().createElement(i().Fragment,null,i().createElement("div",{className:"button",onClick:function(){t.setState({showModal:!0})}},"Editar cara ",i().createElement(U.Icon,{icon:"E"})),i().createElement("div",{className:"button download",onClick:function(){t.download()}},"Descargar ",i().createElement(U.Icon,{icon:"D"})))),this.state.face&&i().createElement("div",{className:"modal".concat(this.state.showModal?"":" hidden"),onClick:this.hideModal,onMouseUp:function(){return!1}},i().createElement("div",{className:"modal-container",onClick:function(t){t.stopPropagation()}},i().createElement("div",{className:"modal-title"},"Recortar imagen"),i().createElement(k.Cropper,{src:this.state.face.src,aspectRatio:1,style:{height:this.state.face.height*Math.min(this.state.face.width,window.innerWidth-40)/this.state.face.width,width:Math.min(this.state.face.width,window.innerWidth-40)},zoomable:!1,ref:this.cropperRef}),i().createElement("div",{className:"button",onClick:this.hideModal},"Aceptar")))))}}]),o}(a.Component),T=N;r.createRoot(document.getElementById("root")).render(i().createElement(i().StrictMode,null,i().createElement(T,null)))},87:function(t,e,n){var a=n(81),i=n.n(a),r=n(645),o=n.n(r)()(i());o.push([t.id,".app {\n  height: 100%;\n  color: var(--primary-color);\n}\n\n.gif {\n  max-width: 100%;\n  display: block;\n  margin: 0 auto;\n}\n\n.buttons {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-wrap: wrap;\n  max-width: 500px;\n  margin: 10px auto;\n}\n\n.button {\n  background-color: var(--secondary-color);\n  border: 0;\n  color: black;\n  margin: 10px;\n  padding: 10px 20px;\n  text-align: center;\n  border-radius: 10px;\n  cursor: pointer;\n}\n\n.download {\n  background-color: var(--primary-color);\n  color: white;\n}\n\n.buttons > .button {\n  flex: 40%;\n}\n\n\n.buttons > .button.download {\n  flex: 100%;\n}\n\n.loading {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n}\n\n.loading > img {\n  width: 200px;\n}\n\n.title {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  margin: 0 auto;\n  padding: 10px 0;\n  max-width: 350px;\n  color: var(--secondary-color);\n}\n\n.title > img {\n  height: 240px;\n  width: 325px;\n  object-position: -3001px -1px;\n  object-fit: none;\n  margin-bottom: 10px;\n}\n\n.title > div {\n  margin-left: auto;\n  font-size: .75em;\n}\n\n.modal {\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  z-index: 2;\n  background-color: rgba(18, 94, 13, 0.5);\n  padding: 10px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n\n.modal.hidden {\n  display: none;\n}\n\n.modal-container {\n  background-color: white;\n  border-radius: 10px;\n  padding: 10px;\n  display: inline-flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n\n.modal-title {\n  font-size: 1.5em;\n  padding: 10px\n}",""]),e.Z=o},424:function(t,e,n){var a=n(81),i=n.n(a),r=n(645),o=n.n(r)()(i());o.push([t.id,"* {\n    font-family: ComicTypo;\n    box-sizing: border-box;\n    --primary-color: #2ef020;\n    --secondary-color: #a1f09b;\n}\n\nhtml, body, #root {\n  height: 100%;\n}\n\nbody {\n    margin: 0;\n    font-size: 1.5em;\n}\n\na {\n    text-decoration: none;\n    color: var(--primary-color);\n}",""]),e.Z=o},738:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC"}}]);